// B2 Vocabulary Quiz Data
const quizData = [
    {
        question: "Choose the word that is closest in meaning to 'meticulous':",
        options: ["Careless", "Thorough", "Quick", "Lazy"],
        correctAnswer: 1
    },
    {
        question: "The manager decided to _______ the meeting until next week.",
        options: ["postpone", "cancel", "arrange", "shorten"],
        correctAnswer: 0
    },
    {
        question: "What is the opposite of 'abundant'?",
        options: ["Plentiful", "Scarce", "Excessive", "Sufficient"],
        correctAnswer: 1
    },
    {
        question: "Choose the correct synonym for 'ambiguous':",
        options: ["Clear", "Obvious", "Vague", "Precise"],
        correctAnswer: 2
    },
    {
        question: "She has a _______ for remembering names and faces.",
        options: ["knack", "lack", "block", "shock"],
        correctAnswer: 0
    },
    {
        question: "The word 'ubiquitous' means:",
        options: ["Rare", "Present everywhere", "Invisible", "Ancient"],
        correctAnswer: 1
    },
    {
        question: "Choose the antonym of 'pragmatic':",
        options: ["Practical", "Realistic", "Idealistic", "Sensible"],
        correctAnswer: 2
    },
    {
        question: "The company's _______ policy led to many complaints from employees.",
        options: ["flexible", "rigid", "fair", "generous"],
        correctAnswer: 1
    },
    {
        question: "What does 'to scrutinize' mean?",
        options: ["To ignore", "To examine closely", "To approve quickly", "To reject"],
        correctAnswer: 1
    },
    {
        question: "Choose the word that best completes: 'The politician's speech was deliberately _______ to avoid controversy.'",
        options: ["provocative", "inflammatory", "vague", "offensive"],
        correctAnswer: 2
    },
    {
        question: "The synonym of 'resilient' is:",
        options: ["Fragile", "Tough", "Weak", "Sensitive"],
        correctAnswer: 1
    },
    {
        question: "To 'mitigate' a problem means to:",
        options: ["Make it worse", "Ignore it", "Make it less severe", "Create it"],
        correctAnswer: 2
    },
    {
        question: "What is the meaning of 'procrastinate'?",
        options: ["To act quickly", "To delay action", "To plan ahead", "To work hard"],
        correctAnswer: 1
    },
    {
        question: "Choose the correct word: 'Her _______ behavior at the party embarrassed everyone.'",
        options: ["discreet", "modest", "obnoxious", "humble"],
        correctAnswer: 2
    },
    {
        question: "The antonym of 'superficial' is:",
        options: ["Shallow", "Profound", "Surface", "Light"],
        correctAnswer: 1
    },
    {
        question: "'Unprecedented' means:",
        options: ["Common", "Expected", "Never happened before", "Repeated"],
        correctAnswer: 2
    },
    {
        question: "Choose the synonym for 'eloquent':",
        options: ["Silent", "Articulate", "Confused", "Quiet"],
        correctAnswer: 1
    },
    {
        question: "The word 'feasible' means:",
        options: ["Impossible", "Possible to do", "Difficult", "Unlikely"],
        correctAnswer: 1
    },
    {
        question: "To 'exacerbate' a situation means to:",
        options: ["Improve it", "Make it worse", "Solve it", "Ignore it"],
        correctAnswer: 1
    },
    {
        question: "Choose the correct word: 'The witness gave a _______ account of the accident.'",
        options: ["vague", "detailed", "brief", "confused"],
        correctAnswer: 1
    },
    {
        question: "What is the opposite of 'temporary'?",
        options: ["Brief", "Short-term", "Permanent", "Fleeting"],
        correctAnswer: 2
    },
    {
        question: "'Inevitable' means something that is:",
        options: ["Avoidable", "Certain to happen", "Unlikely", "Preventable"],
        correctAnswer: 1
    },
    {
        question: "The synonym of 'comprehensive' is:",
        options: ["Limited", "Partial", "Thorough", "Incomplete"],
        correctAnswer: 2
    },
    {
        question: "To 'consolidate' means to:",
        options: ["Divide", "Combine into one", "Separate", "Scatter"],
        correctAnswer: 1
    },
    {
        question: "Choose the word that means 'happening at the same time':",
        options: ["Sequential", "Simultaneous", "Consecutive", "Successive"],
        correctAnswer: 1
    },
    {
        question: "The antonym of 'hostile' is:",
        options: ["Aggressive", "Unfriendly", "Friendly", "Antagonistic"],
        correctAnswer: 2
    },
    {
        question: "'Deteriorate' means to:",
        options: ["Improve", "Get worse", "Stay the same", "Recover"],
        correctAnswer: 1
    },
    {
        question: "Choose the correct word: 'The museum has an _______ collection of ancient artifacts.'",
        options: ["ordinary", "extensive", "limited", "poor"],
        correctAnswer: 1
    },
    {
        question: "What does 'to advocate' mean?",
        options: ["To oppose", "To support publicly", "To criticize", "To ignore"],
        correctAnswer: 1
    },
    {
        question: "The synonym of 'controversial' is:",
        options: ["Agreeable", "Debatable", "Accepted", "Popular"],
        correctAnswer: 1
    },
    {
        question: "'Redundant' means:",
        options: ["Essential", "Necessary", "Unnecessary", "Important"],
        correctAnswer: 2
    },
    {
        question: "To 'alleviate' pain means to:",
        options: ["Increase it", "Reduce it", "Cause it", "Ignore it"],
        correctAnswer: 1
    },
    {
        question: "Choose the antonym of 'conventional':",
        options: ["Traditional", "Standard", "Unconventional", "Normal"],
        correctAnswer: 2
    },
    {
        question: "What is the meaning of 'diligent'?",
        options: ["Lazy", "Hardworking", "Careless", "Slow"],
        correctAnswer: 1
    },
    {
        question: "The word 'compelling' means:",
        options: ["Boring", "Convincing", "Weak", "Uninteresting"],
        correctAnswer: 1
    },
    {
        question: "Choose the correct word: 'The professor's _______ explanation made the complex topic easy to understand.'",
        options: ["confusing", "lucid", "complicated", "unclear"],
        correctAnswer: 1
    },
    {
        question: "'Impartial' means:",
        options: ["Biased", "Unfair", "Neutral", "Prejudiced"],
        correctAnswer: 2
    },
    {
        question: "To 'undermine' someone's confidence means to:",
        options: ["Boost it", "Weaken it", "Support it", "Protect it"],
        correctAnswer: 1
    },
    {
        question: "The synonym of 'coherent' is:",
        options: ["Confusing", "Logical", "Random", "Chaotic"],
        correctAnswer: 1
    },
    {
        question: "What does 'to fluctuate' mean?",
        options: ["To remain stable", "To vary irregularly", "To stay constant", "To be fixed"],
        correctAnswer: 1
    },
    {
        question: "Choose the antonym of 'obsolete':",
        options: ["Outdated", "Modern", "Ancient", "Old-fashioned"],
        correctAnswer: 1
    },
    {
        question: "'Intricate' means:",
        options: ["Simple", "Complex", "Easy", "Basic"],
        correctAnswer: 1
    },
    {
        question: "To 'implement' a plan means to:",
        options: ["Reject it", "Put it into action", "Ignore it", "Delay it"],
        correctAnswer: 1
    },
    {
        question: "Choose the correct word: 'The new law had _______ consequences that nobody had anticipated.'",
        options: ["expected", "predictable", "unforeseen", "obvious"],
        correctAnswer: 2
    },
    {
        question: "What is the meaning of 'tentative'?",
        options: ["Definite", "Uncertain", "Final", "Confirmed"],
        correctAnswer: 1
    },
    {
        question: "The synonym of 'substantial' is:",
        options: ["Minimal", "Significant", "Tiny", "Small"],
        correctAnswer: 1
    },
    {
        question: "'Detrimental' means:",
        options: ["Beneficial", "Helpful", "Harmful", "Positive"],
        correctAnswer: 2
    },
    {
        question: "To 'refute' an argument means to:",
        options: ["Support it", "Prove it wrong", "Accept it", "Ignore it"],
        correctAnswer: 1
    },
    {
        question: "Choose the antonym of 'ambition':",
        options: ["Drive", "Motivation", "Apathy", "Determination"],
        correctAnswer: 2
    },
    {
        question: "What does 'plausible' mean?",
        options: ["Impossible", "Believable", "Absurd", "Ridiculous"],
        correctAnswer: 1
    }
];

// Quiz State
let currentQuestionIndex = 0;
let score = 0;
let userAnswers = [];
let answered = false;

// DOM Elements
const landingScreen = document.getElementById('landing-screen');
const quizScreen = document.getElementById('quiz-screen');
const resultsScreen = document.getElementById('results-screen');
const questionText = document.getElementById('question-text');
const optionsContainer = document.getElementById('options-container');
const currentQuestionSpan = document.getElementById('current-question');
const totalQuestionsSpan = document.getElementById('total-questions');
const currentScoreSpan = document.getElementById('current-score');
const progressFill = document.getElementById('progress-fill');
const feedbackArea = document.getElementById('feedback-area');
const feedbackIcon = document.getElementById('feedback-icon');
const feedbackText = document.getElementById('feedback-text');
const btnNext = document.getElementById('btn-next');

// Initialize
totalQuestionsSpan.textContent = quizData.length;

// Start Quiz
function startQuiz() {
    currentQuestionIndex = 0;
    score = 0;
    userAnswers = [];
    answered = false;
    
    landingScreen.classList.remove('active');
    quizScreen.classList.add('active');
    
    showQuestion();
}

// Show Question
function showQuestion() {
    answered = false;
    const question = quizData[currentQuestionIndex];
    
    // Update header
    currentQuestionSpan.textContent = currentQuestionIndex + 1;
    currentScoreSpan.textContent = score;
    
    // Update progress bar
    const progress = ((currentQuestionIndex) / quizData.length) * 100;
    progressFill.style.width = progress + '%';
    
    // Update question text
    questionText.textContent = question.question;
    
    // Clear and create options
    optionsContainer.innerHTML = '';
    const letters = ['A', 'B', 'C', 'D'];
    
    question.options.forEach((option, index) => {
        const button = document.createElement('button');
        button.className = 'option-btn';
        button.innerHTML = `<span class="option-letter">${letters[index]}</span>${option}`;
        button.onclick = () => selectAnswer(index);
        optionsContainer.appendChild(button);
    });
    
    // Hide feedback and next button
    feedbackArea.classList.remove('show', 'correct', 'wrong');
    btnNext.classList.remove('show');
}

// Select Answer
function selectAnswer(selectedIndex) {
    if (answered) return;
    answered = true;
    
    const question = quizData[currentQuestionIndex];
    const isCorrect = selectedIndex === question.correctAnswer;
    const optionButtons = optionsContainer.querySelectorAll('.option-btn');
    
    // Store user answer
    userAnswers.push({
        questionIndex: currentQuestionIndex,
        selectedAnswer: selectedIndex,
        isCorrect: isCorrect
    });
    
    // Disable all buttons
    optionButtons.forEach(btn => btn.classList.add('disabled'));
    
    // Highlight correct answer
    optionButtons[question.correctAnswer].classList.add('correct');
    
    // Highlight wrong answer if selected
    if (!isCorrect) {
        optionButtons[selectedIndex].classList.add('wrong');
    } else {
        score++;
        currentScoreSpan.textContent = score;
    }
    
    // Show feedback
    feedbackArea.classList.add('show');
    if (isCorrect) {
        feedbackArea.classList.add('correct');
        feedbackIcon.textContent = 'âœ“';
        feedbackText.textContent = 'Correct! Well done!';
    } else {
        feedbackArea.classList.add('wrong');
        feedbackIcon.textContent = 'âœ—';
        feedbackText.textContent = `Incorrect. The correct answer is: ${question.options[question.correctAnswer]}`;
    }
    
    // Show next button
    btnNext.classList.add('show');
    
    // Change button text for last question
    if (currentQuestionIndex === quizData.length - 1) {
        btnNext.textContent = 'See Results';
    }
}

// Next Question
function nextQuestion() {
    currentQuestionIndex++;
    
    if (currentQuestionIndex >= quizData.length) {
        showResults();
    } else {
        showQuestion();
    }
}

// Show Results
function showResults() {
    quizScreen.classList.remove('active');
    resultsScreen.classList.add('active');
    
    // Update final score
    document.getElementById('final-score').textContent = score;
    
    // Score message
    const percentage = (score / quizData.length) * 100;
    const messageElement = document.getElementById('score-message');
    
    if (percentage >= 90) {
        messageElement.textContent = 'ðŸŒŸ Excellent! You have an outstanding vocabulary!';
    } else if (percentage >= 70) {
        messageElement.textContent = 'ðŸ‘ Great job! Your vocabulary is impressive!';
    } else if (percentage >= 50) {
        messageElement.textContent = 'ðŸ‘ Good effort! Keep practicing to improve!';
    } else {
        messageElement.textContent = 'ðŸ’ª Keep studying! Practice makes perfect!';
    }
    
    // Generate review list
    const reviewList = document.getElementById('review-list');
    reviewList.innerHTML = '';
    
    userAnswers.forEach((answer, index) => {
        const question = quizData[answer.questionIndex];
        const reviewItem = document.createElement('div');
        reviewItem.className = `review-item ${answer.isCorrect ? 'correct' : 'wrong'}`;
        
        reviewItem.innerHTML = `
            <div class="review-question">${index + 1}. ${question.question}</div>
            <div class="review-answer">
                Your answer: <span class="${answer.isCorrect ? 'correct-answer' : 'wrong-answer'}">${question.options[answer.selectedAnswer]}</span>
                ${!answer.isCorrect ? `<br>Correct answer: <span class="correct-answer">${question.options[question.correctAnswer]}</span>` : ''}
            </div>
        `;
        
        reviewList.appendChild(reviewItem);
    });
    
    // Update progress to 100%
    progressFill.style.width = '100%';
}

// Restart Quiz
function restartQuiz() {
    resultsScreen.classList.remove('active');
    landingScreen.classList.add('active');
    btnNext.textContent = 'Next â†’';
}
